{"ast":null,"code":"import _typeof from \"/Users/maratatasan/localCode/vue-tutorials/05-vue-custom-filters/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\nimport { createVNode, defineComponent, render } from 'vue';\n\nvar VueComponentFactory =\n/** @class */\nfunction () {\n  function VueComponentFactory() {}\n\n  VueComponentFactory.getComponentDefinition = function (component, parent) {\n    var componentDefinition; // when referencing components by name - ie: cellRenderer: 'MyComponent'\n\n    if (typeof component === 'string') {\n      // look up the definition in Vue\n      componentDefinition = this.searchForComponentInstance(parent, component);\n    } else {\n      componentDefinition = {\n        \"extends\": defineComponent(__assign({}, component))\n      };\n    }\n\n    if (!componentDefinition) {\n      console.error(\"Could not find component with name of \" + component + \". Is it in Vue.components?\");\n    }\n\n    if (componentDefinition[\"extends\"]) {\n      if (componentDefinition[\"extends\"].setup) {\n        componentDefinition.setup = componentDefinition[\"extends\"].setup;\n      }\n\n      componentDefinition[\"extends\"].props = this.addParamsToProps(componentDefinition[\"extends\"].props);\n    } else {\n      componentDefinition.props = this.addParamsToProps(componentDefinition.props);\n    }\n\n    return componentDefinition;\n  };\n\n  VueComponentFactory.addParamsToProps = function (props) {\n    if (!props || Array.isArray(props) && props.indexOf('params') === -1) {\n      props = __spreadArrays(['params'], props ? props : []);\n    } else if (_typeof(props) === 'object' && !props.params) {\n      /* tslint:disable:no-string-literal */\n      props['params'] = {\n        type: Object\n      };\n    }\n\n    return props;\n  };\n\n  VueComponentFactory.createAndMountComponent = function (component, params, parent) {\n    var componentDefinition = VueComponentFactory.getComponentDefinition(component, parent);\n\n    if (!componentDefinition) {\n      return;\n    }\n\n    var _a = this.mount(componentDefinition, {\n      params: Object.freeze(params)\n    }, parent),\n        vNode = _a.vNode,\n        destroy = _a.destroy,\n        el = _a.el; // note that the component creation is synchronous so that componentInstance is set by this point\n\n\n    return {\n      componentInstance: vNode.component.proxy,\n      element: el,\n      destroy: destroy\n    };\n  };\n\n  VueComponentFactory.mount = function (component, props, parent) {\n    var vNode = createVNode(component, props);\n    vNode.appContext = parent.$.appContext;\n    vNode.appContext.provides = __assign(__assign({}, vNode.appContext.provides ? vNode.appContext.provides : {}), parent.$parent.$options.provide ? parent.$parent.$options.provide : {});\n    var el = document.createElement('div');\n    render(vNode, el);\n\n    var destroy = function destroy() {\n      if (el) {\n        render(null, el);\n      }\n\n      el = null;\n      vNode = null;\n    };\n\n    return {\n      vNode: vNode,\n      destroy: destroy,\n      el: el\n    };\n  };\n\n  VueComponentFactory.searchForComponentInstance = function (parent, component, maxDepth, suppressError) {\n    if (maxDepth === void 0) {\n      maxDepth = 10;\n    }\n\n    if (suppressError === void 0) {\n      suppressError = false;\n    }\n\n    var componentInstance = null;\n    var currentParent = parent.$parent;\n    var depth = 0;\n\n    while (!componentInstance && currentParent && currentParent.$options && ++depth < maxDepth) {\n      var currentParentAsThis = currentParent;\n      componentInstance = currentParentAsThis.$options && currentParentAsThis.$options.components ? currentParentAsThis.$options.components[component] : null;\n      currentParent = currentParent.$parent;\n    } // then search in globally registered components of app\n\n\n    if (!componentInstance) {\n      var components = parent.$.appContext.components;\n\n      if (components && components[component]) {\n        componentInstance = components[component];\n      }\n    }\n\n    if (!componentInstance && !suppressError) {\n      console.error(\"Could not find component with name of \" + component + \". Is it in Vue.components?\");\n      return null;\n    }\n\n    return componentInstance;\n  };\n\n  return VueComponentFactory;\n}();\n\nexport { VueComponentFactory };","map":{"version":3,"mappings":"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","names":["createVNode","defineComponent","render","VueComponentFactory","component","parent","componentDefinition","searchForComponentInstance","console","error","setup","props","addParamsToProps","Array","isArray","indexOf","params","type","Object","getComponentDefinition","mount","freeze","vNode","destroy","el","componentInstance","proxy","element","appContext","$","provides","__assign","$parent","$options","provide","document","createElement","maxDepth","suppressError","currentParent","depth","currentParentAsThis","components"],"sourceRoot":"","sources":["../src/VueComponentFactory.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}